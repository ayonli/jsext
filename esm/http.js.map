{"version":3,"file":"http.js","sources":["../http.ts"],"sourcesContent":["/**\n * Functions for handling HTTP related tasks, such as parsing headers and\n * serving HTTP requests.\n *\n * Many functions in this module are designed to work in all environments, but\n * some of them are only available in server runtimes such as Node.js, Deno,\n * Bun and Cloudflare Workers.\n *\n * This module itself is a executable script that can be used to serve static\n * files in the current working directory, or we can provide an entry module\n * which has an default export that satisfies the {@link ServeOptions} to start\n * a custom HTTP server.\n *\n * The script can be run directly with Deno, Bun, or Node.js.\n *\n * Deno:\n * ```sh\n * deno run --allow-net --allow-read jsr:@ayonli/jsext/http [--port PORT] [DIR]\n * deno run --allow-net --allow-read jsr:@ayonli/jsext/http <entry.ts>\n * ```\n *\n * Bun:\n * ```sh\n * bun run node_modules/@ayonli/jsext/http.ts [DIR] [--port PORT] [--parallel [NUM]]\n * bun run node_modules/@ayonli/jsext/http.ts <entry.ts> [--parallel [NUM]]\n * ```\n *\n * Node.js:\n *\n * ```sh\n * tsx node_modules/@ayonli/jsext/http.ts [DIR] [--port PORT] [--parallel [NUM]]\n * tsx --import=@ayonli/jsext/http <entry.ts> [--parallel [NUM]]\n * # or\n * node node_modules/@ayonli/jsext/esm/http.js [DIR] [--port PORT] [--parallel [NUM]]\n * node -r @ayonli/jsext/http <entry.js> [--parallel [NUM]]\n * ```\n * @module\n */\nvar _a, _b;\nimport { asyncTask } from \"./async.ts\";\nimport bytes from \"./bytes.ts\";\nimport { args, parseArgs } from \"./cli.ts\";\nimport { isBun, isDeno, isNode } from \"./env.ts\";\nimport { createReadableStream, exists, readDir, readFile, stat } from \"./fs.ts\";\nimport { sha256 } from \"./hash.ts\";\nimport { createRequestContext, createTimingFunctions, listenFetchEvent, renderDirectoryPage, withHeaders, patchTimingMetrics, withWeb, } from \"./http/internal.ts\";\nimport { constructNetAddress, HttpServer } from \"./http/server.ts\";\nimport { ifMatch, ifNoneMatch, parseRange } from \"./http/util.ts\";\nimport { isMain } from \"./module.ts\";\nimport { randomPort as _randomPort } from \"./net.ts\";\nimport { as } from \"./object.ts\";\nimport { extname, join, resolve, startsWith } from \"./path.ts\";\nimport { readAsArray } from \"./reader.ts\";\nimport { stripStart } from \"./string.ts\";\nimport { WebSocketServer } from \"./ws.ts\";\nexport * from \"./http/util.ts\";\n/**\n * Calculates the ETag for a given entity.\n *\n * NOTE: This function shadows the one in the `http/util` module and provides\n * support for old Node.js versions.\n *\n * @example\n * ```ts\n * import { stat } from \"@ayonli/jsext/fs\";\n * import { etag } from \"@ayonli/jsext/http\";\n *\n * const etag1 = await etag(\"Hello, World!\");\n *\n * const data = new Uint8Array([1, 2, 3, 4, 5]);\n * const etag2 = await etag(data);\n *\n * const info = await stat(\"file.txt\");\n * const etag3 = await etag(info);\n * ```\n */\nexport async function etag(data) {\n    var _a;\n    if (typeof data === \"string\" || data instanceof Uint8Array) {\n        if (!data.length) {\n            // a short circuit for zero length entities\n            return `0-47DEQpj8HBSa+/TImW+5JCeuQeR`;\n        }\n        if (typeof data === \"string\") {\n            data = bytes(data);\n        }\n        const hash = await sha256(data, \"base64\");\n        return `${data.length.toString(16)}-${hash.slice(0, 27)}`;\n    }\n    const mtime = (_a = data.mtime) !== null && _a !== void 0 ? _a : new Date();\n    const hash = await sha256(mtime.toISOString(), \"base64\");\n    return `${data.size.toString(16)}-${hash.slice(0, 27)}`;\n}\n/**\n * @deprecated Use `randomPort` from `@ayonli/jsext/net` instead.\n */\nexport const randomPort = _randomPort;\n/**\n * Serves HTTP requests with the given options.\n *\n * This function provides a unified way to serve HTTP requests in all server\n * runtimes, even worker runtimes. It's similar to the `Deno.serve` and\n * `Bun.serve` functions, in fact, it calls them internally when running in the\n * corresponding runtime. When running in Node.js, it uses the built-in `http`\n * or `http2` modules to create the server.\n *\n * This function also provides easy ways to handle Server-sent Events and\n * WebSockets inside the fetch handler without touching the underlying verbose\n * APIs.\n *\n * Currently, the following runtimes are supported:\n *\n * - Node.js (v18.4.1 or above)\n * - Deno\n * - Bun\n * - Cloudflare Workers\n * - Fastly Compute\n * - Service Worker in the browser\n *\n * NOTE: WebSocket is not supported in Fastly Compute and browser's Service\n * Worker at the moment.\n *\n * @example\n * ```ts\n * // simple http server\n * import { serve } from \"@ayonli/jsext/http\";\n *\n * serve({\n *     fetch(req) {\n *         return new Response(\"Hello, World!\");\n *     },\n * });\n * ```\n *\n * @example\n * ```ts\n * // set the hostname and port\n * import { serve } from \"@ayonli/jsext/http\";\n *\n * serve({\n *     hostname: \"localhost\",\n *     port: 8787, // same port as Wrangler dev\n *     fetch(req) {\n *         return new Response(\"Hello, World!\");\n *     },\n * });\n * ```\n *\n * @example\n * ```ts\n * // serve HTTPS/HTTP2 requests\n * import { readFileAsText } from \"@ayonli/jsext/fs\";\n * import { serve } from \"@ayonli/jsext/http\";\n *\n * serve({\n *     key: await readFileAsText(\"./cert.key\"),\n *     cert: await readFileAsText(\"./cert.pem\"),\n *     fetch(req) {\n *         return new Response(\"Hello, World!\");\n *    },\n * });\n * ```\n *\n * @example\n * ```ts\n * // respond Server-sent Events\n * import { serve } from \"@ayonli/jsext/http\";\n *\n * serve({\n *     fetch(req, ctx) {\n *         const { events, response } = ctx.createEventEndpoint();\n *         let count = events.lastEventId ? Number(events.lastEventId) : 0;\n *\n *         setInterval(() => {\n *             const lastEventId = String(++count);\n *             events.dispatchEvent(new MessageEvent(\"ping\", {\n *                 data: lastEventId,\n *                 lastEventId,\n *             }));\n *         }, 5_000);\n *\n *         return response;\n *     },\n * });\n * ```\n *\n * @example\n * ```ts\n * // upgrade to WebSocket\n * import { serve } from \"@ayonli/jsext/http\";\n *\n * serve({\n *     fetch(req, ctx) {\n *         const { socket, response } = ctx.upgradeWebSocket();\n *\n *         socket.addEventListener(\"message\", (event) => {\n *             console.log(event.data);\n *             socket.send(\"Hello, Client!\");\n *         });\n *\n *         return response;\n *     },\n * });\n * ```\n *\n * @example\n * ```ts\n * // module mode (for `deno serve`, Bun and Cloudflare Workers)\n * import { serve } from \"@ayonli/jsext/http\";\n *\n * export default serve({\n *     type: \"module\",\n *     fetch(req) {\n *         return new Response(\"Hello, World!\");\n *     },\n * });\n * ```\n */\nexport function serve(options) {\n    var _a;\n    const type = isDeno || isBun || isNode ? options.type || \"classic\" : \"classic\";\n    const ws = new WebSocketServer(options.ws);\n    const { fetch: handle, key, cert, onListen, headers } = options;\n    const onError = (_a = options.onError) !== null && _a !== void 0 ? _a : ((err) => {\n        console.error(err);\n        return new Response(\"Internal Server Error\", {\n            status: 500,\n            statusText: \"Internal Server Error\",\n        });\n    });\n    return new HttpServer(async () => {\n        let hostname = options.hostname || \"0.0.0.0\";\n        let port = options.port;\n        let controller = null;\n        let server = null;\n        if (isDeno) {\n            if (type === \"classic\") {\n                port !== null && port !== void 0 ? port : (port = await randomPort(8000, hostname));\n                controller = new AbortController();\n                const task = asyncTask();\n                const _server = server = Deno.serve({\n                    hostname,\n                    port,\n                    key,\n                    cert,\n                    signal: controller.signal,\n                    onListen: () => task.resolve(),\n                }, (req, info) => {\n                    const { getTimers, time, timeEnd } = createTimingFunctions();\n                    const ctx = createRequestContext(req, {\n                        ws,\n                        remoteAddress: constructNetAddress({\n                            hostname: info.remoteAddr.hostname,\n                            port: info.remoteAddr.port,\n                        }),\n                        time,\n                        timeEnd,\n                    });\n                    const _handle = withHeaders(handle, headers);\n                    const _onError = withHeaders(onError, headers);\n                    return _handle(req, ctx)\n                        .then(res => patchTimingMetrics(res, getTimers()))\n                        .catch(err => _onError(err, req, ctx));\n                });\n                await task;\n                hostname = _server.addr.hostname;\n                port = _server.addr.port;\n            }\n            else {\n                hostname = \"\";\n                port = 0;\n            }\n        }\n        else if (isBun) {\n            if (type === \"classic\") {\n                const tls = key && cert ? { key, cert } : undefined;\n                port !== null && port !== void 0 ? port : (port = await randomPort(8000, hostname));\n                const _server = server = Bun.serve({\n                    hostname,\n                    port,\n                    tls,\n                    fetch: (req, server) => {\n                        const { getTimers, time, timeEnd } = createTimingFunctions();\n                        const addr = server.requestIP(req);\n                        const ctx = createRequestContext(req, {\n                            ws,\n                            remoteAddress: addr ? constructNetAddress({\n                                hostname: addr.address,\n                                port: addr.port,\n                            }) : null,\n                            time,\n                            timeEnd,\n                        });\n                        const _handle = withHeaders(handle, headers);\n                        const _onError = withHeaders(onError, headers);\n                        return _handle(req, ctx)\n                            .then(res => patchTimingMetrics(res, getTimers()))\n                            .catch(err => _onError(err, req, ctx));\n                    },\n                    websocket: ws.bunListener,\n                });\n                ws.bunBind(server);\n                hostname = _server.hostname;\n                port = _server.port;\n            }\n            else {\n                hostname = \"0.0.0.0\";\n                port = 3000;\n            }\n        }\n        else if (isNode) {\n            if (type === \"classic\") {\n                const reqListener = withWeb((req, info) => {\n                    const { getTimers, time, timeEnd } = createTimingFunctions();\n                    const ctx = createRequestContext(req, { ws, ...info, time, timeEnd });\n                    const _handle = withHeaders(handle, headers);\n                    const _onError = withHeaders(onError, headers);\n                    return _handle(req, ctx)\n                        .then(res => patchTimingMetrics(res, getTimers()))\n                        .catch(err => _onError(err, req, ctx));\n                });\n                if (key && cert) {\n                    const { createSecureServer } = await import(\"node:http2\");\n                    server = createSecureServer({ key, cert, allowHTTP1: true }, reqListener);\n                }\n                else {\n                    const { createServer } = await import(\"node:http\");\n                    server = createServer(reqListener);\n                }\n                const _server = server;\n                port !== null && port !== void 0 ? port : (port = await randomPort(8000, hostname));\n                await new Promise((resolve) => {\n                    if (hostname && hostname !== \"0.0.0.0\") {\n                        _server.listen(port, hostname, resolve);\n                    }\n                    else {\n                        _server.listen(port, resolve);\n                    }\n                });\n                const address = _server.address();\n                hostname || (hostname = address.address);\n                port = address.port;\n            }\n            else {\n                hostname = \"\";\n                port = 0;\n            }\n        }\n        else if (typeof addEventListener === \"function\") {\n            hostname = \"\";\n            port = 0;\n            if (type === \"classic\") {\n                listenFetchEvent({ ws, fetch: handle, onError, headers });\n            }\n        }\n        else {\n            throw new Error(\"Unsupported runtime\");\n        }\n        return { http: server, hostname, port, controller };\n    }, { type, fetch: handle, onError, onListen, ws, headers, secure: !!key && !!cert });\n}\n/**\n * Serves static files from a file system directory or KV namespace (in\n * Cloudflare Workers).\n *\n * NOTE: In Node.js, this function requires Node.js v18.4.1 or above.\n *\n * NOTE: In Cloudflare Workers, this function requires setting the\n * `[site].bucket` option in the `wrangler.toml` file.\n *\n * @example\n * ```ts\n * import { serve, serveStatic } from \"@ayonli/jsext/http\";\n *\n * // use `serve()` so this program runs in all environments\n * serve({\n *     async fetch(req: Request, ctx) {\n *         const { pathname } = new URL(req.url);\n *\n *         if (pathname.startsWith(\"/assets\")) {\n *             return await serveStatic(req, {\n *                 fsDir: \"./assets\",\n *                 kv: ctx.bindings?.__STATIC_CONTENT,\n *                 urlPrefix: \"/assets\",\n *             });\n *         }\n *\n *         return new Response(\"Hello, World!\");\n *     }\n * });\n * ```\n *\n * @example\n * ```toml\n * # wrangler.toml\n * [site]\n * bucket = \"./assets\"\n * ```\n */\nexport async function serveStatic(req, options = {}) {\n    var _a, _b, _c, _d, _e, _f;\n    const extraHeaders = (_a = options.headers) !== null && _a !== void 0 ? _a : {};\n    const dir = (_b = options.fsDir) !== null && _b !== void 0 ? _b : \".\";\n    const prefix = options.urlPrefix ? join(options.urlPrefix) : \"\";\n    const url = new URL(req.url);\n    const pathname = decodeURIComponent(url.pathname);\n    if (prefix && !startsWith(pathname, prefix)) {\n        return new Response(\"Not Found\", {\n            status: 404,\n            statusText: \"Not Found\",\n            headers: extraHeaders,\n        });\n    }\n    const filename = join(dir, stripStart(pathname.slice(prefix.length), \"/\"));\n    let info;\n    try {\n        info = await stat(filename);\n    }\n    catch (err) {\n        if (((_c = as(err, Error)) === null || _c === void 0 ? void 0 : _c.name) === \"NotFoundError\") {\n            return new Response(`Not Found`, {\n                status: 404,\n                statusText: \"Not Found\",\n                headers: extraHeaders,\n            });\n        }\n        else if (((_d = as(err, Error)) === null || _d === void 0 ? void 0 : _d.name) === \"NotAllowedError\") {\n            return new Response(\"Forbidden\", {\n                status: 403,\n                statusText: \"Forbidden\",\n                headers: extraHeaders,\n            });\n        }\n        else {\n            return new Response(\"Internal Server Error\", {\n                status: 500,\n                statusText: \"Internal Server Error\",\n                headers: extraHeaders,\n            });\n        }\n    }\n    if (info.kind === \"directory\") {\n        if (!req.url.endsWith(\"/\")) {\n            return Response.redirect(req.url + \"/\", 301);\n        }\n        else {\n            if (await exists(join(filename, \"index.html\"))) {\n                return serveStatic(new Request(join(req.url, \"index.html\"), req), options);\n            }\n            else if (await exists(join(filename, \"index.htm\"))) {\n                return serveStatic(new Request(join(req.url, \"index.htm\"), req), options);\n            }\n            else if (options.listDir) {\n                const entries = await readAsArray(readDir(filename));\n                return renderDirectoryPage(pathname, entries, extraHeaders);\n            }\n            else {\n                return new Response(\"Forbidden\", {\n                    status: 403,\n                    statusText: \"Forbidden\",\n                    headers: extraHeaders,\n                });\n            }\n        }\n    }\n    else if (info.kind !== \"file\") {\n        return new Response(\"Forbidden\", {\n            status: 403,\n            statusText: \"Forbidden\",\n            headers: extraHeaders,\n        });\n    }\n    const rangeValue = req.headers.get(\"Range\");\n    let range;\n    if (rangeValue && info.size) {\n        try {\n            range = parseRange(rangeValue);\n        }\n        catch (_g) {\n            return new Response(\"Invalid Range header\", {\n                status: 416,\n                statusText: \"Range Not Satisfiable\",\n                headers: extraHeaders,\n            });\n        }\n    }\n    const mtime = (_e = info.mtime) !== null && _e !== void 0 ? _e : new Date();\n    const _etag = await etag(info);\n    const headers = new Headers({\n        ...extraHeaders,\n        \"Accept-Ranges\": \"bytes\",\n        \"Last-Modified\": mtime.toUTCString(),\n        \"Etag\": _etag,\n    });\n    const ifModifiedSinceValue = req.headers.get(\"If-Modified-Since\");\n    const ifNoneMatchValue = req.headers.get(\"If-None-Match\");\n    const ifMatchValue = req.headers.get(\"If-Match\");\n    let modified = true;\n    if (ifModifiedSinceValue) {\n        const date = new Date(ifModifiedSinceValue);\n        modified = Math.floor(mtime.valueOf() / 1000) > Math.floor(date.valueOf() / 1000);\n    }\n    else if (ifNoneMatchValue) {\n        modified = ifNoneMatch(ifNoneMatchValue, _etag);\n    }\n    if (!modified) {\n        return new Response(null, {\n            status: 304,\n            statusText: \"Not Modified\",\n            headers,\n        });\n    }\n    else if (ifMatchValue && range && !ifMatch(ifMatchValue, _etag)) {\n        return new Response(\"Precondition Failed\", {\n            status: 412,\n            statusText: \"Precondition Failed\",\n            headers,\n        });\n    }\n    if (/^text\\/|^application\\/(json|yaml|toml|xml|javascript)$/.test(info.type)) {\n        headers.set(\"Content-Type\", info.type + \"; charset=utf-8\");\n    }\n    else {\n        headers.set(\"Content-Type\", info.type || \"application/octet-stream\");\n    }\n    if (info.atime) {\n        headers.set(\"Date\", info.atime.toUTCString());\n    }\n    if (options.maxAge) {\n        headers.set(\"Cache-Control\", `public, max-age=${options.maxAge}`);\n    }\n    if (range) {\n        const { ranges, suffix: suffixLength } = range;\n        let start;\n        let end;\n        if (ranges.length) {\n            ({ start } = ranges[0]);\n            end = Math.min((_f = ranges[0].end) !== null && _f !== void 0 ? _f : info.size - 1, info.size - 1);\n        }\n        else {\n            start = Math.max(info.size - suffixLength, 0);\n            end = info.size - 1;\n        }\n        const data = await readFile(filename);\n        const slice = data.subarray(start, end + 1);\n        headers.set(\"Content-Range\", `bytes ${start}-${end}/${info.size}`);\n        headers.set(\"Content-Length\", String(end - start + 1));\n        return new Response(slice, {\n            status: 206,\n            statusText: \"Partial Content\",\n            headers,\n        });\n    }\n    else if (!info.size) {\n        headers.set(\"Content-Length\", \"0\");\n        return new Response(\"\", {\n            status: 200,\n            statusText: \"OK\",\n            headers,\n        });\n    }\n    else {\n        headers.set(\"Content-Length\", String(info.size));\n        return new Response(createReadableStream(filename), {\n            status: 200,\n            statusText: \"OK\",\n            headers,\n        });\n    }\n}\nasync function startServer(args) {\n    const options = parseArgs(args, {\n        alias: { p: \"port\" }\n    });\n    const port = Number.isFinite(options[\"port\"]) ? options[\"port\"] : undefined;\n    const parallel = options[\"parallel\"];\n    let config = {};\n    let fetch;\n    let filename = String(options[0] || \".\");\n    const ext = extname(filename);\n    if (/^\\.m?(js|ts)x?/.test(ext)) { // custom entry file\n        filename = resolve(filename);\n        const mod = await import(filename);\n        if (typeof mod.default === \"object\" && typeof mod.default.fetch === \"function\") {\n            config = mod.default;\n            fetch = config.fetch;\n        }\n        else {\n            throw new Error(\"The entry file must have an `export default { fetch }` statement\");\n        }\n    }\n    fetch || (fetch = (req) => serveStatic(req, {\n        fsDir: filename,\n        listDir: true,\n        // gzip: true,\n    }));\n    if (isNode || isBun) {\n        import(\"node:os\").then(async ({ availableParallelism }) => {\n            const { default: cluster } = await import(\"node:cluster\");\n            if (cluster.isPrimary && parallel) {\n                const max = typeof parallel === \"number\" ? parallel : availableParallelism();\n                const _port = port || await randomPort(8000);\n                const hostname = config.hostname || \"localhost\";\n                const secure = !!config.key && !!config.cert;\n                const workers = new Array(max).fill(null);\n                const forkWorker = (i) => {\n                    const worker = cluster.fork({\n                        HTTP_PORT: String(_port),\n                    });\n                    workers[i] = { worker, ready: false };\n                    worker.on(\"message\", (msg) => {\n                        if (msg === \"ready\") {\n                            workers[i].ready = true;\n                            if (workers.every(w => w === null || w === void 0 ? void 0 : w.ready)) {\n                                const protocol = secure ? \"https\" : \"http\";\n                                const origin = `${protocol}://${hostname}:${_port}`;\n                                console.log(`Server listening on ${origin} with ${max} workers`);\n                            }\n                        }\n                    });\n                    worker.once(\"exit\", (code) => {\n                        workers[i] = null;\n                        if (code) {\n                            forkWorker(i);\n                        }\n                    });\n                };\n                for (let i = 0; i < max; i++) {\n                    forkWorker(i);\n                }\n            }\n            else if (cluster.isWorker && process.env[\"HTTP_PORT\"]) {\n                serve({\n                    ...config,\n                    fetch,\n                    port: Number(process.env[\"HTTP_PORT\"]),\n                    type: \"classic\",\n                    onListen: (info) => {\n                        var _a, _b;\n                        (_a = config.onListen) === null || _a === void 0 ? void 0 : _a.call(config, info);\n                        (_b = process.send) === null || _b === void 0 ? void 0 : _b.call(process, \"ready\");\n                    },\n                });\n            }\n            else {\n                serve({ ...config, fetch, port, type: \"classic\" });\n            }\n        });\n    }\n    else {\n        serve({ ...config, fetch, port, type: \"classic\" });\n    }\n}\n/**\n * In case the program is bundled, this function checks if this very module is\n * the main entry module.\n */\nfunction isThisMain(importMeta) {\n    var _a, _b;\n    const filename = (_b = (_a = importMeta.filename) === null || _a === void 0 ? void 0 : _a.replace(/\\\\/g, \"/\")) !== null && _b !== void 0 ? _b : importMeta.url;\n    return /\\/jsext(\\/(esm|cjs)|[\\/@\\^]*(\\d+\\.\\d+\\.\\d+|latest))?\\/http(\\.(ts|js))?$/.test(filename);\n}\nif ((isDeno || isBun || isNode) && isMain(import.meta) && isThisMain(import.meta)) {\n    startServer(args);\n}\nelse if (isNode && process.execArgv.some(arg => arg.endsWith(\"@ayonli/jsext/http\"))) {\n    const options = parseArgs(process.execArgv, {\n        alias: { r: \"require\" },\n        lists: [\"require\", \"import\"],\n    });\n    const args = process.argv.slice(1);\n    if (args.length && (((_a = options[\"require\"]) === null || _a === void 0 ? void 0 : _a.includes(\"@ayonli/jsext/http\")) ||\n        ((_b = options[\"import\"]) === null || _b === void 0 ? void 0 : _b.includes(\"@ayonli/jsext/http\")))) {\n        startServer(args);\n    }\n}\n//# sourceMappingURL=http.js.map"],"names":["_randomPort"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,EAAE,EAAE,EAAE,CAAC;AAkBX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,eAAe,IAAI,CAAC,IAAI,EAAE;AACjC,IAAI,IAAI,EAAE,CAAC;AACX,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,YAAY,UAAU,EAAE;AAChE,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAC1B;AACA,YAAY,OAAO,CAAC,6BAA6B,CAAC,CAAC;AACnD,SAAS;AACT,QAAQ,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;AACtC,YAAY,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;AAC/B,SAAS;AACT,QAAQ,MAAM,IAAI,GAAG,MAAM,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AAClD,QAAQ,OAAO,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AAClE,KAAK;AACL,IAAI,MAAM,KAAK,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC;AAChF,IAAI,MAAM,IAAI,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,CAAC;AAC7D,IAAI,OAAO,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AAC5D,CAAC;AACD;AACA;AACA;AACY,MAAC,UAAU,GAAGA,aAAY;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,KAAK,CAAC,OAAO,EAAE;AAC/B,IAAI,IAAI,EAAE,CAAC;AACX,IAAI,MAAM,IAAI,GAAG,MAAM,IAAI,KAAK,IAAI,MAAM,GAAG,OAAO,CAAC,IAAI,IAAI,SAAS,GAAG,SAAS,CAAC;AACnF,IAAI,MAAM,EAAE,GAAG,IAAI,eAAe,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;AAC/C,IAAI,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,OAAO,CAAC;AACpE,IAAI,MAAM,OAAO,GAAG,CAAC,EAAE,GAAG,OAAO,CAAC,OAAO,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,KAAK;AACtF,QAAQ,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC3B,QAAQ,OAAO,IAAI,QAAQ,CAAC,uBAAuB,EAAE;AACrD,YAAY,M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"}