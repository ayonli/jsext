{"version":3,"file":"cli.js","sources":["../cli.ts"],"sourcesContent":["/**\n * Useful utility functions for interacting with the terminal.\n *\n * NOTE: despite the name of this module, many of its functions can also be used\n * in the browser environment.\n * @module\n * @experimental\n */\nimport { text } from \"./bytes.ts\";\nimport { interop } from \"./module.ts\";\nimport { PowerShellCommands } from \"./cli/constants.ts\";\nimport { isBrowser, isBun, isDeno } from \"./env.ts\";\nimport runtime, { platform as _platform } from \"./runtime.ts\";\nimport { basename } from \"./path.ts\";\nimport { trimStart } from \"./string.ts\";\n/**\n * @deprecated import `platform` from `@ayonli/jsext/runtime` module instead.\n */\nexport const platform = _platform;\n/**\n * @deprecated use `runtime().tsSupport` from `@ayonli/jsext/runtime` module instead.\n */\nexport const isTsRuntime = () => runtime().tsSupport;\n/** Checks if the program is running in Windows Subsystem for Linux. */\nexport function isWSL() {\n    if (platform() !== \"linux\")\n        return false;\n    if (typeof Deno === \"object\") {\n        return Deno.osRelease().includes(\"microsoft-standard-WSL\");\n    }\n    else if (typeof process === \"object\" && typeof process.env === \"object\") {\n        return !!process.env[\"WSL_INTEROP\"];\n    }\n    return false;\n}\nfunction parseValue(arg) {\n    let value = arg.trim();\n    if (value === \"true\") {\n        value = true;\n    }\n    else if (value === \"false\") {\n        value = false;\n    }\n    else if (/^[-+]?\\d+(\\.\\d+)?$/.test(value)) {\n        value = Number(value);\n    }\n    return value;\n}\nfunction parseKeyValue(arg, noCoercion = false) {\n    let index = arg.indexOf(\"=\");\n    if (index === -1) {\n        return [arg, undefined];\n    }\n    else {\n        const key = arg.slice(0, index);\n        const value = arg.slice(index + 1);\n        if (noCoercion === true || (Array.isArray(noCoercion) && noCoercion.includes(key))) {\n            return [key, value];\n        }\n        else {\n            return [key, parseValue(value)];\n        }\n    }\n}\n/**\n * Parses the given CLI arguments into an object.\n *\n * @example\n * ```ts\n * import { parseArgs } from \"@ayonli/jsext/cli\";\n *\n * const args = parseArgs([\n *     \"Bob\",\n *     \"--age\", \"30\",\n *     \"--married\",\n *     \"--wife=Alice\",\n *     \"--children\", \"Mia\",\n *     \"--children\", \"Ava\",\n *     \"-p\"\n * ], {\n *     alias: { \"p\": \"has-parents\" },\n *     lists: [\"children\"],\n * });\n *\n * console.log(args);\n * // {\n * //     \"0\": \"Bob\",\n * //     age: 30,\n * //     married: true,\n * //     wife: \"Alice\",\n * //     children: [\"Mia\", \"Ava\"],\n * //     \"has-parents\": true\n * // }\n * ```\n */\nexport function parseArgs(args, options = {}) {\n    var _a;\n    const { alias: alias = {}, lists = [], noCoercion = false } = options;\n    const result = {};\n    let key = null;\n    let index = 0;\n    const set = (key, value) => {\n        var _a;\n        if (lists.includes(key)) {\n            ((_a = result[key]) !== null && _a !== void 0 ? _a : (result[key] = [])).push(value);\n        }\n        else {\n            result[key] = value;\n        }\n    };\n    for (let i = 0; i < args.length; i++) {\n        const arg = args[i];\n        if (arg === \"--\") {\n            result[\"--\"] = args.slice(i + 1);\n            break;\n        }\n        else if (arg.startsWith(\"--\")) {\n            if (key) {\n                set(key, true);\n                key = null;\n            }\n            const [_key, value] = parseKeyValue(arg.slice(2), noCoercion);\n            if (value !== undefined) {\n                set(_key, value);\n            }\n            else {\n                key = arg.slice(2);\n            }\n        }\n        else if (arg.startsWith(\"-\")) {\n            if (key) {\n                set(key, true);\n                key = null;\n            }\n            const char = arg.slice(1);\n            key = (_a = alias[char]) !== null && _a !== void 0 ? _a : char;\n        }\n        else if (key) {\n            if (noCoercion === true || (Array.isArray(noCoercion) && noCoercion.includes(key))) {\n                set(key, arg);\n            }\n            else {\n                set(key, parseValue(arg));\n            }\n            key = null;\n        }\n        else {\n            const _key = String(index++);\n            if (noCoercion === true || (Array.isArray(noCoercion) && noCoercion.includes(_key))) {\n                set(_key, arg);\n            }\n            else {\n                set(_key, parseValue(arg));\n            }\n        }\n    }\n    if (key) {\n        set(key, true);\n    }\n    return result;\n}\n/**\n * Quotes a string to be used as a single argument to a shell command.\n */\nexport function quote(arg) {\n    if ((/[\"'\\s]/).test(arg)) {\n        return `\"` + arg.replace(/([\"\\\\$])/g, '\\\\$1') + `\"`;\n    }\n    return String(arg).replace(/([A-Za-z]:)?([#!\"$&'()*,:;<=>?@[\\\\\\]^`{|}])/g, '$1\\\\$2');\n}\n/**\n * Returns the path of the given command if it exists in the system,\n * otherwise returns `null`.\n */\nexport async function which(cmd) {\n    if (platform() === \"windows\") {\n        const { code, stdout } = await run(\"powershell\", [\n            \"-Command\",\n            `Get-Command -Name ${cmd} | Select-Object -ExpandProperty Source`\n        ]);\n        return code ? null : stdout.trim();\n    }\n    else {\n        const { code, stdout } = await run(\"which\", [cmd]);\n        return code ? null : stdout.trim();\n    }\n}\n/**\n * Executes a command in the terminal and returns the exit code and outputs.\n */\nexport async function run(cmd, args) {\n    var _a;\n    const isWindows = platform() === \"windows\";\n    const isWslPs = isWSL() && cmd.endsWith(\"powershell.exe\");\n    if (typeof Deno === \"object\") {\n        const { Buffer } = await import(\"node:buffer\");\n        const { decode } = interop(await import(\"iconv-lite\"), false);\n        const _cmd = isWindows && PowerShellCommands.includes(cmd)\n            ? new Deno.Command(\"powershell\", { args: [\"-c\", cmd, ...args.map(quote)] })\n            : new Deno.Command(cmd, { args });\n        const { code, stdout, stderr } = await _cmd.output();\n        return {\n            code,\n            stdout: isWindows || isWslPs ? decode(Buffer.from(stdout), \"cp936\") : text(stdout),\n            stderr: isWindows || isWslPs ? decode(Buffer.from(stderr), \"cp936\") : text(stderr),\n        };\n    }\n    else if (typeof process === \"object\" && !!((_a = process.versions) === null || _a === void 0 ? void 0 : _a.node)) {\n        const { spawn } = await import(\"child_process\");\n        const { decode } = await interop(import(\"iconv-lite\"), false);\n        const child = isWindows && PowerShellCommands.includes(cmd)\n            ? spawn(\"powershell\", [\"-c\", cmd, ...args.map(quote)])\n            : spawn(cmd, args);\n        const stdout = [];\n        const stderr = [];\n        child.stdout.on(\"data\", chunk => {\n            if (isWindows || isWslPs) {\n                stdout.push(decode(chunk, \"cp936\"));\n            }\n            else {\n                stdout.push(String(chunk));\n            }\n        });\n        child.stderr.on(\"data\", chunk => {\n            if (isWindows || isWslPs) {\n                stderr.push(decode(chunk, \"cp936\"));\n            }\n            else {\n                stderr.push(String(chunk));\n            }\n        });\n        const code = await new Promise((resolve, reject) => {\n            child.once(\"exit\", (code, signal) => {\n                if (code === null && signal) {\n                    resolve(1);\n                }\n                else {\n                    resolve(code !== null && code !== void 0 ? code : 0);\n                }\n            }).once(\"error\", reject);\n        });\n        return {\n            code,\n            stdout: stdout.join(\"\"),\n            stderr: stderr.join(\"\"),\n        };\n    }\n    else {\n        throw new Error(\"Unsupported runtime\");\n    }\n}\n/**\n * Executes the script inside PowerShell as though they were typed at the\n * PowerShell command prompt.\n *\n * This function can also be called within Windows Subsystem for Linux to\n * directly interact with PowerShell.\n */\nexport async function powershell(script) {\n    let command = \"powershell\";\n    if (isWSL()) {\n        command = \"/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/powershell.exe\";\n    }\n    return await run(command, [\"-c\", script]);\n}\n/**\n * Executes a command with elevated privileges using `sudo` (or UAC in Windows).\n */\nexport async function sudo(cmd, args, options = {}) {\n    const _isWindows = platform() === \"windows\";\n    if ((!(options === null || options === void 0 ? void 0 : options.gui) && !_isWindows) || isWSL()) {\n        return await run(\"sudo\", [cmd, ...args]);\n    }\n    const { exec } = await interop(import(\"sudo-prompt\"));\n    return await new Promise((resolve, reject) => {\n        exec(`${cmd}` + (args.length ? ` ${args.map(quote).join(\" \")}` : \"\"), {\n            name: (options === null || options === void 0 ? void 0 : options.title) || (isDeno ? \"Deno\" : isBun ? \"Bun\" : \"NodeJS\"),\n        }, (error, stdout, stderr) => {\n            if (error) {\n                reject(error);\n            }\n            else {\n                let _stdout = String(stdout);\n                if (_isWindows && cmd === \"echo\" && _stdout.startsWith(`\"`)) {\n                    // In Windows CMD, the `echo` command will output the string\n                    // with double quotes. We need to remove them.\n                    let lastIndex = _stdout.lastIndexOf(`\"`);\n                    _stdout = _stdout.slice(1, lastIndex) + _stdout.slice(lastIndex + 1);\n                }\n                resolve({\n                    code: 0,\n                    stdout: _stdout,\n                    stderr: String(stderr),\n                });\n            }\n        });\n    });\n}\nexport function env(name = undefined, value = undefined) {\n    var _a, _b;\n    if (typeof Deno === \"object\") {\n        if (name === undefined) {\n            return Deno.env.toObject();\n        }\n        else if (value === undefined) {\n            return Deno.env.get(name);\n        }\n        else {\n            Deno.env.set(name, value);\n        }\n    }\n    else if (typeof process === \"object\" && typeof process.env === \"object\") {\n        if (name === undefined) {\n            return process.env;\n        }\n        else if (value === undefined) {\n            return process.env[name];\n        }\n        else {\n            process.env[name] = value;\n        }\n    }\n    else {\n        // @ts-ignore\n        const env = globalThis[\"__env__\"];\n        // @ts-ignore\n        if (env === undefined || env === null || typeof env === \"object\") {\n            if (name === undefined) {\n                return env !== null && env !== void 0 ? env : {};\n            }\n            else if (value === undefined) {\n                return (_a = env === null || env === void 0 ? void 0 : env[name]) !== null && _a !== void 0 ? _a : undefined;\n            }\n            // @ts-ignore\n            ((_b = globalThis[\"__env__\"]) !== null && _b !== void 0 ? _b : (globalThis[\"__env__\"] = {}))[name] = value;\n            return;\n        }\n        else {\n            throw new Error(\"Unsupported runtime\");\n        }\n    }\n}\n/**\n * Opens the given file in the default text editor.\n *\n * The `filename` can include a line number by appending `:<number>` or `#L<number>`.\n *\n * NOTE: in the browser, this function will always try to open the file in VS Code,\n * regardless of whether it's available or not.\n */\nexport async function edit(filename) {\n    const match = filename.match(/(:|#L)(\\d+)/);\n    let line;\n    if (match) {\n        line = Number(match[2]);\n        filename = filename.slice(0, match.index);\n    }\n    if (isBrowser) {\n        window.open(\"vscode://file/\" + trimStart(filename, \"/\") + (line ? `:${line}` : \"\"));\n        return;\n    }\n    let editor = env(\"EDITOR\")\n        || env(\"VISUAL\")\n        || (await which(\"code\"))\n        || undefined;\n    if (!editor) {\n        if (platform() === \"windows\") {\n            editor = \"notepad.exe\";\n        }\n        else {\n            editor = (await which(\"nano\"))\n                || (await which(\"vim\"))\n                || (await which(\"vi\"))\n                || (await which(\"edit\"))\n                || undefined;\n        }\n    }\n    if (!editor) {\n        throw new Error(\"No editor was found.\");\n    }\n    const editorName = basename(editor, \".exe\");\n    let args;\n    if (editorName === \"code\") {\n        args = line ? [\"--goto\", `${filename}:${line}`] : [filename];\n    }\n    else if (editorName === \"nano\" || editorName === \"vim\" || editorName === \"vi\") {\n        args = line ? [`+${line}`, filename] : [filename];\n    }\n    else {\n        args = [filename];\n    }\n    const { code, stderr } = await run(editor, args);\n    if (code) {\n        throw new Error(stderr || `Failed to open ${filename} in the editor.`);\n    }\n}\n//# sourceMappingURL=cli.js.map"],"names":["_platform"],"mappings":"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"}