{"version":3,"file":"index.js","sources":["../../promise/index.ts"],"sourcesContent":["/** Try to resolve a promise with a timeout limit. */\nexport async function timeout(value, ms) {\n    const result = await Promise.race([\n        value,\n        new Promise((_, reject) => setTimeout(() => {\n            reject(new Error(`operation timeout after ${ms}ms`));\n        }, ms))\n    ]);\n    return result;\n}\n/** Resolves a promise only after the given duration. */\nexport async function after(value, ms) {\n    const [result] = await Promise.allSettled([\n        value,\n        new Promise(resolve => setTimeout(resolve, ms))\n    ]);\n    if (result.status === \"fulfilled\") {\n        return result.value;\n    }\n    else {\n        throw result.reason;\n    }\n}\n/** Blocks the context for a given time. */\nexport async function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n/** Blocks the context until the test is passed. */\nexport async function until(test) {\n    while ((await test()) === false) {\n        await new Promise(resolve => setTimeout(resolve));\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":"AAAA;AACO,eAAe,OAAO,CAAC,KAAK,EAAE,EAAE,EAAE;AACzC,IAAI,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC;AACtC,QAAQ,KAAK;AACb,QAAQ,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM,KAAK,UAAU,CAAC,MAAM;AACpD,YAAY,MAAM,CAAC,IAAI,KAAK,CAAC,CAAC,wBAAwB,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACjE,SAAS,EAAE,EAAE,CAAC,CAAC;AACf,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,MAAM,CAAC;AAClB,CAAC;AACD;AACO,eAAe,KAAK,CAAC,KAAK,EAAE,EAAE,EAAE;AACvC,IAAI,MAAM,CAAC,MAAM,CAAC,GAAG,MAAM,OAAO,CAAC,UAAU,CAAC;AAC9C,QAAQ,KAAK;AACb,QAAQ,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;AACvD,KAAK,CAAC,CAAC;AACP,IAAI,IAAI,MAAM,CAAC,MAAM,KAAK,WAAW,EAAE;AACvC,QAAQ,OAAO,MAAM,CAAC,KAAK,CAAC;AAC5B,KAAK;AACL,SAAS;AACT,QAAQ,MAAM,MAAM,CAAC,MAAM,CAAC;AAC5B,KAAK;AACL,CAAC;AACD;AACO,eAAe,KAAK,CAAC,EAAE,EAAE;AAChC,IAAI,OAAO,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC;AAC3D,CAAC;AACD;AACO,eAAe,KAAK,CAAC,IAAI,EAAE;AAClC,IAAI,OAAO,CAAC,MAAM,IAAI,EAAE,MAAM,KAAK,EAAE;AACrC,QAAQ,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;AAC1D,KAAK;AACL;;;;"}