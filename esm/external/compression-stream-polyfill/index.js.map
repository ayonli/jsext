{"version":3,"file":"index.js","sources":["../../../external/compression-stream-polyfill/index.ts"],"sourcesContent":["import { createGzip, createDeflate, createDeflateRaw, createGunzip, createInflate, createInflateRaw, } from \"node:zlib\";\nfunction throwUnsupportedFormatError(format) {\n    throw new TypeError(`Unsupported format: ${format}`);\n}\nif (typeof CompressionStream === \"undefined\") {\n    globalThis.CompressionStream = class CompressionStream {\n        constructor(format) {\n            let impl;\n            if (format === \"gzip\") {\n                impl = createGzip();\n            }\n            else if (format === \"deflate\") {\n                impl = createDeflate();\n            }\n            else if (format === \"deflate-raw\") {\n                impl = createDeflateRaw();\n            }\n            else {\n                throwUnsupportedFormatError(format);\n            }\n            this.readable = new ReadableStream({\n                start(controller) {\n                    impl.on(\"data\", (chunk) => controller.enqueue(chunk));\n                    impl.once(\"error\", (err) => controller.error(err));\n                    impl.once(\"close\", () => controller.close());\n                },\n            });\n            this.writable = new WritableStream({\n                start(controller) {\n                    impl.once(\"error\", (err) => controller.error(err));\n                    impl.once(\"close\", () => controller.error());\n                },\n                write(chunk) {\n                    impl.write(chunk);\n                },\n                close() {\n                    impl.end();\n                },\n                abort(reason) {\n                    impl.destroy(reason);\n                },\n            });\n        }\n    };\n}\nif (typeof DecompressionStream === \"undefined\") {\n    globalThis.DecompressionStream = class DecompressionStream {\n        constructor(format) {\n            let impl;\n            if (format === \"gzip\") {\n                impl = createGunzip();\n            }\n            else if (format === \"deflate\") {\n                impl = createInflate();\n            }\n            else if (format === \"deflate-raw\") {\n                impl = createInflateRaw();\n            }\n            else {\n                throwUnsupportedFormatError(format);\n            }\n            this.readable = new ReadableStream({\n                start(controller) {\n                    impl.on(\"data\", (chunk) => controller.enqueue(chunk));\n                    impl.once(\"error\", (err) => controller.error(err));\n                    impl.once(\"close\", () => controller.close());\n                },\n            });\n            this.writable = new WritableStream({\n                start(controller) {\n                    impl.once(\"error\", (err) => controller.error(err));\n                    impl.once(\"close\", () => controller.error());\n                },\n                write(chunk) {\n                    impl.write(chunk);\n                },\n                close() {\n                    impl.end();\n                },\n                abort(reason) {\n                    impl.destroy(reason);\n                },\n            });\n        }\n    };\n}\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":"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"}