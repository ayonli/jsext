{"version":3,"file":"internal.js","sources":["../../http/internal.ts"],"sourcesContent":["import { orderBy } from \"../array.ts\";\nimport { join } from \"../path.ts\";\nimport { dedent } from \"../string.ts\";\nexport async function respondDir(entries, pathname, extraHeaders = {}) {\n    const list = [\n        ...orderBy(entries.filter(e => e.kind === \"directory\"), e => e.name).map(e => e.name + \"/\"),\n        ...orderBy(entries.filter(e => e.kind === \"file\"), e => e.name).map(e => e.name),\n    ];\n    if (pathname !== \"/\") {\n        list.unshift(\"../\");\n    }\n    const listHtml = list.map((name) => {\n        let url = join(pathname, name);\n        if (name.endsWith(\"/\") && url !== \"/\") {\n            url += \"/\";\n        }\n        return dedent `\n            <li>\n                <a href=\"${url}\">${name}</a>\n            </li>\n            `;\n    });\n    return new Response(dedent `\n                <!DOCTYPE HTML>\n                <html lang=\"en\">\n                <head>\n                    <meta charset=\"utf-8\">\n                    <title>Directory listing for ${pathname}</title>\n                    <style>\n                    body {\n                        font-family: system-ui;\n                    }\n                    </style>\n                </head>\n                <body>\n                    <h1>Directory listing for ${pathname}</h1>\n                    <hr>\n                    <ul>\n                        ${listHtml.join(\"\")}\n                    </ul>\n                </body>\n                </html>\n                `, {\n        status: 200,\n        statusText: \"OK\",\n        headers: {\n            ...extraHeaders,\n            \"Content-Type\": \"text/html; charset=utf-8\",\n        },\n    });\n}\n//# sourceMappingURL=internal.js.map"],"names":[],"mappings":";;;;AAGO,eAAe,UAAU,CAAC,OAAO,EAAE,QAAQ,EAAE,YAAY,GAAG,EAAE,EAAE;AACvE,IAAI,MAAM,IAAI,GAAG;AACjB,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC;AACnG,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;AACxF,KAAK,CAAC;AACN,IAAI,IAAI,QAAQ,KAAK,GAAG,EAAE;AAC1B,QAAQ,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC5B,KAAK;AACL,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK;AACxC,QAAQ,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACvC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,GAAG,EAAE;AAC/C,YAAY,GAAG,IAAI,GAAG,CAAC;AACvB,SAAS;AACT,QAAQ,OAAO,MAAM,CAAC,CAAC;AACvB;AACA,yBAAyB,EAAE,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC;AACxC;AACA,YAAY,CAAC,CAAC;AACd,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC;AAChC;AACA;AACA;AACA;AACA,iDAAiD,EAAE,QAAQ,CAAC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,EAAE,QAAQ,CAAC;AACzD;AACA;AACA,wBAAwB,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAC5C;AACA;AACA;AACA,gBAAgB,CAAC,EAAE;AACnB,QAAQ,MAAM,EAAE,GAAG;AACnB,QAAQ,UAAU,EAAE,IAAI;AACxB,QAAQ,OAAO,EAAE;AACjB,YAAY,GAAG,YAAY;AAC3B,YAAY,cAAc,EAAE,0BAA0B;AACtD,SAAS;AACT,KAAK,CAAC,CAAC;AACP;;;;"}