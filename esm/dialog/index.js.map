{"version":3,"file":"index.js","sources":["../../dialog/index.ts"],"sourcesContent":["/**\n * Asynchronous dialog functions for both browsers and Node.js.\n *\n * This includes `alert`, `confirm`, `prompt` and other non-standard dialogs.\n *\n * **NOTE:** Currently, this module doesn't work well in Deno since it doesn't\n * provide enough features for the `process.stdin` object.\n *\n * **NOTE:** This module is experimental and breaks the process in Node.js REPL\n * environment.\n * @experimental\n *\n * @module\n */\nimport { stripEnd } from \"../string/index.ts\";\nimport Dialog, { closeDialog } from \"./components/Dialog.ts\";\nimport Text from \"./components/Text.ts\";\nimport Footer from \"./components/Footer.ts\";\nimport OkButton from \"./components/OkButton.ts\";\nimport CancelButton from \"./components/CancelButton.ts\";\nimport Input from \"./components/Input.ts\";\nimport Progress from \"./components/Progress.ts\";\nasync function ownStdin(stdin, task) {\n    const rawMode = stdin.isRaw;\n    rawMode || stdin.setRawMode(true);\n    const _listeners = stdin.listeners(\"keypress\");\n    stdin.removeAllListeners(\"keypress\");\n    const result = await task(stdin);\n    _listeners.forEach(listener => stdin.addListener(\"keypress\", listener));\n    stdin.setRawMode(rawMode);\n    return result;\n}\n/**\n * Displays a dialog with a message, and to wait until the user dismisses the\n * dialog.\n */\nexport async function alert(message) {\n    var _a;\n    if (typeof Deno === \"object\") {\n        return Promise.resolve(globalThis.alert(message));\n    }\n    else if (typeof document === \"object\") {\n        return new Promise(resolve => {\n            document.body.appendChild(Dialog({\n                onCancel: () => resolve(),\n                onOk: () => resolve(),\n            }, Text(message), Footer(OkButton())));\n        });\n    }\n    else {\n        const { stdin, stdout } = await import(\"process\");\n        const { createInterface } = await import(\"readline/promises\");\n        const repl = await import(\"repl\");\n        // @ts-ignore fix CommonJS import\n        const isRepl = !!((_a = repl.default) !== null && _a !== void 0 ? _a : repl).repl;\n        if (isRepl) {\n            return await ownStdin(stdin, async () => {\n                stdout.write(message + \" [Enter] \");\n                await new Promise(resolve => {\n                    const listener = (_, key) => {\n                        if (key.name === \"escape\" ||\n                            key.name === \"enter\" ||\n                            key.name === \"return\" ||\n                            (key.name === \"c\" && key.ctrl)) {\n                            stdin.off(\"keypress\", listener);\n                            resolve();\n                        }\n                    };\n                    stdin.on(\"keypress\", listener);\n                });\n                stdout.write(\"\\n\");\n            });\n        }\n        const rl = createInterface({ input: stdin, output: stdout });\n        const job = rl.question(message + \" [Enter] \");\n        const abort = new Promise(resolve => {\n            stdin.on(\"keypress\", (_, key) => {\n                if (key.name === \"escape\" || (key.name === \"c\" && key.ctrl)) {\n                    resolve(\"\");\n                }\n            });\n        });\n        await Promise.race([job, abort]);\n        rl.close();\n    }\n}\n/**\n * Displays a dialog with a message, and to wait until the user either confirms\n * or cancels the dialog.\n */\nexport async function confirm(message) {\n    var _a;\n    if (typeof Deno === \"object\") {\n        return Promise.resolve(globalThis.confirm(message));\n    }\n    else if (typeof document === \"object\") {\n        return new Promise(resolve => {\n            document.body.appendChild(Dialog({\n                onCancel: () => resolve(false),\n                onOk: () => resolve(true),\n            }, Text(message), Footer(CancelButton(), OkButton())));\n        });\n    }\n    else {\n        const { stdin, stdout } = await import(\"process\");\n        const { createInterface } = await import(\"readline/promises\");\n        const repl = await import(\"repl\");\n        // @ts-ignore fix CommonJS import\n        const isRepl = !!((_a = repl.default) !== null && _a !== void 0 ? _a : repl).repl;\n        if (isRepl) {\n            return await ownStdin(stdin, async () => {\n                stdout.write(message + \" [y/N] \");\n                const answer = await new Promise(resolve => {\n                    const buf = [];\n                    const listener = (char, key) => {\n                        if (key.name === \"escape\" || (key.name === \"c\" && key.ctrl)) {\n                            stdin.off(\"keypress\", listener);\n                            resolve(\"N\");\n                        }\n                        else if (key.name === \"enter\" || key.name === \"return\") {\n                            stdin.off(\"keypress\", listener);\n                            resolve(buf.join(\"\"));\n                        }\n                        else if (key.name === \"backspace\") {\n                            stdout.moveCursor(-1, 0);\n                            stdout.clearLine(1);\n                            buf.pop();\n                        }\n                        else {\n                            stdout.write(char);\n                            buf.push(char);\n                        }\n                    };\n                    stdin.on(\"keypress\", listener);\n                });\n                stdout.write(\"\\n\");\n                const ok = answer.toLowerCase().trim();\n                return ok === \"y\" || ok === \"yes\";\n            });\n        }\n        const rl = createInterface({ input: stdin, output: stdout });\n        const job = rl.question(message + \" [y/N] \");\n        const abort = new Promise(resolve => {\n            stdin.on(\"keypress\", (_, key) => {\n                if (key.name === \"escape\" || (key.name === \"c\" && key.ctrl)) {\n                    resolve(\"N\");\n                }\n            });\n        });\n        const answer = await Promise.race([job, abort]);\n        const ok = answer.toLowerCase().trim();\n        rl.close();\n        return ok === \"y\" || ok === \"yes\";\n    }\n}\n/**\n * Displays a dialog with a message prompting the user to input some text, and to\n * wait until the user either submits the text or cancels the dialog.\n */\nexport async function prompt(message, defaultValue = \"\") {\n    var _a;\n    if (typeof Deno === \"object\") {\n        return Promise.resolve(globalThis.prompt(message, defaultValue));\n    }\n    else if (typeof document === \"object\") {\n        return new Promise(resolve => {\n            document.body.appendChild(Dialog({\n                onCancel: () => resolve(null),\n                onOk: (dialog) => {\n                    const input = dialog.querySelector(\"input\");\n                    resolve(input.value);\n                },\n            }, Text(message), Input(defaultValue), Footer(CancelButton(), OkButton())));\n        });\n    }\n    else {\n        const { stdin, stdout } = await import(\"process\");\n        const { createInterface } = await import(\"readline/promises\");\n        const repl = await import(\"repl\");\n        // @ts-ignore fix CommonJS import\n        const isRepl = !!((_a = repl.default) !== null && _a !== void 0 ? _a : repl).repl;\n        if (isRepl) {\n            return await ownStdin(stdin, async () => {\n                stdout.write(message + \" \");\n                const answer = await new Promise(resolve => {\n                    const buf = [];\n                    const listener = (char, key) => {\n                        if (key.name === \"escape\" || (key.name === \"c\" && key.ctrl)) {\n                            stdin.off(\"keypress\", listener);\n                            resolve(null);\n                        }\n                        else if (key.name === \"enter\" || key.name === \"return\") {\n                            stdin.off(\"keypress\", listener);\n                            resolve(buf.join(\"\"));\n                        }\n                        else if (key.name === \"backspace\") {\n                            stdout.moveCursor(-1, 0);\n                            stdout.clearLine(1);\n                            buf.pop();\n                        }\n                        else {\n                            stdout.write(char);\n                            buf.push(char);\n                        }\n                    };\n                    stdin.on(\"keypress\", listener);\n                });\n                stdout.write(\"\\n\");\n                return answer;\n            });\n        }\n        const rl = createInterface({ input: stdin, output: stdout });\n        const job = rl.question(message + \" \");\n        if (defaultValue) {\n            rl.write(defaultValue);\n        }\n        const abort = new Promise(resolve => {\n            var _a;\n            (_a = stdin.on) === null || _a === void 0 ? void 0 : _a.call(stdin, \"keypress\", (_, key) => {\n                if (key.name === \"escape\" || (key.name === \"c\" && key.ctrl)) {\n                    resolve(null);\n                }\n            });\n        });\n        const answer = await Promise.race([job, abort]);\n        rl.close();\n        return answer;\n    }\n}\n/**\n * Displays a dialog with a progress bar indicating the ongoing state of the\n * `fn` function, and to wait until the job finishes or the user cancels the\n * dialog.\n *\n * @param onAbort If provided, the dialog will show a cancel button that allows\n * the user to abort the task. This function can either return a default/fallback\n * result or throw an error to indicate the cancellation.\n *\n * @example\n * ```ts\n * // default usage\n * import { progress } from \"@ayonli/jsext/dialog\";\n *\n * const result = await progress(\"Processing...\", async () => {\n *     // ... some long-running task\n *     return { ok: true };\n * });\n *\n * console.log(result); // { ok: true }\n * ```\n *\n * @example\n * ```ts\n * // update state\n * import { progress } from \"@ayonli/jsext/dialog\";\n *\n * const result = await progress(\"Processing...\", async (set) => {\n *     set({ percent: 0 });\n *     // ... some long-running task\n *     set({ percent: 50, message: \"Halfway there!\" });\n *     // ... some long-running task\n *     set({ percent: 100 });\n *\n *     return { ok: true };\n * });\n *\n * console.log(result); // { ok: true }\n * ```\n *\n * @example\n * ```ts\n * // abortable\n * import { progress } from \"@ayonli/jsext/dialog\";\n *\n * const result = await progress(\"Processing...\", async (set, signal) => {\n *     set({ percent: 0 });\n *\n *     if (!signal.aborted) {\n *         // ... some long-running task\n *         set({ percent: 50, message: \"Halfway there!\" });\n *     }\n *\n *     if (!signal.aborted) {\n *         // ... some long-running task\n *         set({ percent: 100 });\n *     }\n *\n *     return { ok: true };\n * }, () => {\n *     return { ok: false };\n * });\n *\n * console.log(result); // { ok: true } or { ok: false }\n * ```\n */\nexport async function progress(message, fn, onAbort = undefined) {\n    var _a;\n    const ctrl = new AbortController();\n    const signal = ctrl.signal;\n    let fallback = null;\n    const abort = async () => {\n        if (!onAbort)\n            return;\n        try {\n            const result = await onAbort();\n            fallback = { value: result };\n            ctrl.abort();\n        }\n        catch (err) {\n            ctrl.abort(err);\n        }\n    };\n    const handleAbort = () => new Promise((resolve, reject) => {\n        signal.addEventListener(\"abort\", () => {\n            if (fallback) {\n                resolve(fallback.value);\n            }\n            else {\n                reject(signal.reason);\n            }\n        });\n    });\n    if (typeof document === \"object\") {\n        const text = Text(message);\n        const { element: progressBar, setValue } = Progress();\n        const dialog = Dialog({ onCancel: abort }, text);\n        const set = (state) => {\n            if (signal.aborted) {\n                return;\n            }\n            if (state.message) {\n                text.textContent = state.message;\n            }\n            if (state.percent !== undefined) {\n                setValue(state.percent);\n            }\n        };\n        if (onAbort) {\n            dialog.appendChild(Footer(progressBar, CancelButton()));\n        }\n        else {\n            dialog.appendChild(progressBar);\n        }\n        document.body.appendChild(dialog);\n        let job = fn(set, signal);\n        if (onAbort) {\n            job = Promise.race([job, handleAbort()]);\n        }\n        try {\n            return await job;\n        }\n        finally {\n            signal.aborted || closeDialog(dialog, \"OK\");\n        }\n    }\n    else if (typeof Deno === \"object\") {\n        let lastMessage = stripEnd(message, \"...\");\n        let lastPercent = undefined;\n        const set = (state) => {\n            if (signal.aborted) {\n                return;\n            }\n            if (state.message) {\n                lastMessage = state.message;\n            }\n            if (state.percent !== undefined) {\n                lastPercent = state.percent;\n            }\n            if (lastPercent !== undefined) {\n                console.log(lastMessage + \" ... \" + lastPercent + \"%\");\n            }\n            else {\n                console.log(lastMessage);\n            }\n        };\n        console.log(message);\n        return await fn(set, signal);\n    }\n    else {\n        const { stdin, stdout } = await import(\"process\");\n        const { createInterface, clearLine, moveCursor } = await import(\"readline\");\n        const writer = createInterface({\n            input: stdin,\n            output: stdout,\n        });\n        let waitingIndicator = message.endsWith(\"...\") ? \"...\" : \"\";\n        const waitingTimer = setInterval(() => {\n            if (waitingIndicator === \"...\") {\n                waitingIndicator = \".\";\n                moveCursor(stdout, -2, 0);\n                clearLine(stdin, 1);\n            }\n            else {\n                waitingIndicator += \".\";\n                writer.write(\".\");\n            }\n        }, 1000);\n        let lastMessage = stripEnd(message, \"...\");\n        let lastPercent = undefined;\n        const set = (state) => {\n            moveCursor(stdout, -writer.cursor, 0);\n            clearLine(stdout, 1);\n            if (signal.aborted) {\n                return;\n            }\n            if (state.message) {\n                lastMessage = state.message;\n            }\n            if (state.percent !== undefined) {\n                lastPercent = state.percent;\n            }\n            writer.write(lastMessage);\n            if (lastPercent !== undefined) {\n                writer.write(\" ... \" + lastPercent + \"%\");\n                clearInterval(waitingTimer);\n            }\n        };\n        if (onAbort) {\n            (_a = stdin.on) === null || _a === void 0 ? void 0 : _a.call(stdin, \"keypress\", (_, key) => {\n                if (key.name === \"escape\") {\n                    abort();\n                }\n            });\n        }\n        writer.write(message);\n        let job = fn(set, signal);\n        if (onAbort) {\n            job = Promise.race([job, handleAbort()]);\n        }\n        try {\n            return await job;\n        }\n        finally {\n            clearInterval(waitingTimer);\n            writer.write(\"\\n\");\n            writer.close();\n        }\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":"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"}