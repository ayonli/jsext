{"version":3,"file":"file.js","sources":["../../dialog/file.ts"],"sourcesContent":["import { isBrowserWindow, isDeno, isNodeLike } from \"../env.ts\";\n/**\n * Opens the file picker dialog and pick a file, this function returns the\n * file's path or a `FileSystemFileHandle` in the browser.\n *\n * NOTE: Browser support is limited to the chromium-based browsers.\n *\n * @example\n * ```ts\n * // default usage\n * import { pickFile } from \"@ayonli/jsext/dialog\";\n *\n * // Node.js, Deno, Bun\n * const filename = await pickFile() as string | null;\n *\n * // Browser (Chrome)\n * const handle = await pickFile() as FileSystemFileHandle | null;\n * ```\n *\n * @example\n * ```ts\n * // filter by MIME type\n * import { pickFile } from \"@ayonli/jsext/dialog\";\n *\n * // Node.js, Deno, Bun\n * const filename = await pickFile({ type: \"image/*\" }) as string | null;\n *\n * // Browser (Chrome)\n * const handle = await pickFile({ type: \"image/*\" }) as FileSystemFileHandle | null;\n * ```\n *\n * @example\n * ```ts\n * // pick for save\n * import { pickFile } from \"@ayonli/jsext/dialog\";\n *\n * // Node.js, Deno, Bun\n * const filename = await pickFile({\n *     forSave: true,\n *     defaultName: \"hello.txt\",\n * }) as string | null;\n *\n * // Browser (Chrome)\n * const handle = await pickFile({\n *     forSave: true,\n *     defaultName: \"hello.txt\",\n * }) as FileSystemFileHandle | null;\n * ```\n */\nexport async function pickFile(options = {}) {\n    if (typeof globalThis[\"showOpenFilePicker\"] === \"function\") {\n        const { pickFile } = await import(\"./web/file.ts\");\n        return await pickFile(options);\n    }\n    else if (isDeno || isNodeLike) {\n        const { pickFile } = await import(\"./cli/file.ts\");\n        return await pickFile(options);\n    }\n    throw new Error(\"Unsupported platform\");\n}\n/**\n * Opens the file picker dialog and pick multiple files, this function returns\n * the paths or `FileSystemFileHandle` objects in the browser of the files\n * selected.\n *\n * NOTE: Browser support is limited to the chromium-based browsers.\n *\n * @example\n * ```ts\n * // default usage\n * import { pickFiles } from \"@ayonli/jsext/dialog\";\n *\n * // Node.js, Deno, Bun\n * const filenames = await pickFiles() as string[];\n *\n * // Browser (Chrome)\n * const handles = await pickFiles() as FileSystemFileHandle[];\n * ```\n *\n * @example\n * ```ts\n * // filter by MIME type\n * import { pickFiles } from \"@ayonli/jsext/dialog\";\n *\n * // Node.js, Deno, Bun\n * const filenames = await pickFiles({ type: \"image/*\" }) as string[];\n *\n * // Browser (Chrome)\n * const handles = await pickFiles({ type: \"image/*\" }) as FileSystemFileHandle[];\n * ```\n */\nexport async function pickFiles(options = {}) {\n    if (typeof globalThis[\"showOpenFilePicker\"] === \"function\") {\n        const { pickFiles } = await import(\"./web/file.ts\");\n        return await pickFiles(options);\n    }\n    else if (isDeno || isNodeLike) {\n        const { pickFiles } = await import(\"./cli/file.ts\");\n        return await pickFiles(options);\n    }\n    throw new Error(\"Unsupported platform\");\n}\n/**\n * Opens the file picker dialog and pick a directory, this function returns the\n * directory's path or `FileSystemDirectoryHandle` in the browser.\n *\n * NOTE: Browser support is limited to the chromium-based browsers.\n *\n * @example\n * ```ts\n * import { pickDirectory } from \"@ayonli/jsext/dialog\";\n *\n * // Node.js, Deno, Bun\n * const dirname = await pickDirectory() as string | null;\n *\n * // Browser (Chrome)\n * const handle = await pickDirectory() as FileSystemDirectoryHandle | null;\n * ```\n */\nexport async function pickDirectory(options = {}) {\n    if (typeof globalThis[\"showDirectoryPicker\"] === \"function\") {\n        const { pickDirectory } = await import(\"./web/file.ts\");\n        return await pickDirectory();\n    }\n    else if (isDeno || isNodeLike) {\n        const { pickDirectory } = await import(\"./cli/file.ts\");\n        return await pickDirectory(options);\n    }\n    throw new Error(\"Unsupported platform\");\n}\nexport async function openFile(options = {}) {\n    const { title = \"\", type = \"\", multiple = false, directory = false } = options;\n    if (directory) {\n        return await openDirectory({ title });\n    }\n    else if (multiple) {\n        return await openFiles({ title, type });\n    }\n    if (isBrowserWindow) {\n        const { openFile } = await import(\"./web/file.ts\");\n        return await openFile(options);\n    }\n    else if (isDeno || isNodeLike) {\n        const { openFile } = await import(\"./cli/file.ts\");\n        return await openFile(options);\n    }\n    else {\n        throw new Error(\"Unsupported runtime\");\n    }\n}\n/**\n * Opens the file picker dialog and selects multiple files to open.\n *\n * @example\n * ```ts\n * // default usage\n * import { openFiles } from \"@ayonli/jsext/dialog\";\n *\n * const files = await openFiles();\n *\n * if (files.length > 0) {\n *     console.log(`You selected: ${files.map(file => file.name).join(\", \")}`);\n * }\n * ```\n *\n * @example\n * ```ts\n * // filter by MIME type\n * import { openFiles } from \"@ayonli/jsext/dialog\";\n *\n * const files = await openFiles({ type: \"image/*\" });\n *\n * if (files.length > 0) {\n *     console.log(`You selected: ${files.map(file => file.name).join(\", \")}`);\n *     console.assert(files.every(file => file.type.startsWith(\"image/\")));\n * }\n * ```\n */\nexport async function openFiles(options = {}) {\n    if (isBrowserWindow) {\n        const { openFiles } = await import(\"./web/file.ts\");\n        return await openFiles(options);\n    }\n    else if (isDeno || isNodeLike) {\n        const { openFiles } = await import(\"./cli/file.ts\");\n        return await openFiles(options);\n    }\n    else {\n        throw new Error(\"Unsupported runtime\");\n    }\n}\n/**\n * Opens the directory picker dialog and selects all its files to open.\n *\n * @example\n * ```ts\n * import { openDirectory } from \"@ayonli/jsext/dialog\";\n *\n * const files = await openDirectory();\n *\n * for (const file of files) {\n *     console.log(`File name: ${file.name}, path: ${file.webkitRelativePath}`);\n * }\n * ```\n */\nexport async function openDirectory(options = {}) {\n    if (isBrowserWindow) {\n        const { openDirectory } = await import(\"./web/file.ts\");\n        return await openDirectory();\n    }\n    else if (isDeno || isNodeLike) {\n        const { openDirectory } = await import(\"./cli/file.ts\");\n        return await openDirectory(options);\n    }\n    else {\n        throw new Error(\"Unsupported runtime\");\n    }\n}\nexport async function saveFile(file, options = {}) {\n    if (isBrowserWindow) {\n        const { saveFile } = await import(\"./web/file.ts\");\n        return await saveFile(file, options);\n    }\n    else if (isDeno || isNodeLike) {\n        const { saveFile } = await import(\"./cli/file.ts\");\n        return await saveFile(file, options);\n    }\n    else {\n        throw new Error(\"Unsupported runtime\");\n    }\n}\n/**\n * Downloads the file of the given URL to the file system.\n *\n * In the CLI, this function will open a dialog to let the user choose the\n * location where the file will be saved. In the browser, the file will be saved\n * to the default download location, or the browser will prompt the user to\n * choose a location.\n *\n * NOTE: This function depends on the Fetch API and Web Streams API, in Node.js,\n * it requires Node.js v18.0 or above.\n *\n * @example\n * ```ts\n * import { downloadFile } from \"@ayonli/jsext/dialog\";\n *\n * await downloadFile(\"https://ayonli.github.io/jsext/README.md\");\n * ```\n */\nexport async function downloadFile(url, options = {}) {\n    if (isBrowserWindow) {\n        const { downloadFile } = await import(\"./web/file.ts\");\n        return downloadFile(url, options);\n    }\n    else if (!isDeno && !isNodeLike || typeof fetch !== \"function\") {\n        throw new Error(\"Unsupported runtime\");\n    }\n    const { downloadFile } = await import(\"./cli/file.ts\");\n    return downloadFile(url, options);\n}\n//# sourceMappingURL=file.js.map"],"names":[],"mappings":"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"}