{"version":3,"file":"pickFile.js","sources":["../../dialog/pickFile.ts"],"sourcesContent":["import { platform } from \"./pickFile/util.ts\";\nimport { macChooseFolder, macChooseMultipleFiles, macChooseOneFile } from \"./pickFile/mac.ts\";\nimport { linuxChooseFolder, linuxChooseMultipleFiles, linuxChooseOneFile } from \"./pickFile/linux.ts\";\nexport default async function pickFile(options = {}) {\n    const { title = \"\", type = \"\", multiple = false, folder = false } = options;\n    if (typeof document === \"object\") {\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = type !== null && type !== void 0 ? type : \"\";\n        input.multiple = multiple !== null && multiple !== void 0 ? multiple : false;\n        input.webkitdirectory = folder !== null && folder !== void 0 ? folder : false;\n        return await new Promise(resolve => {\n            input.onchange = () => {\n                var _a;\n                const files = input.files;\n                if (folder || multiple) {\n                    resolve(files ? [...files] : []);\n                }\n                else {\n                    resolve(files ? ((_a = files[0]) !== null && _a !== void 0 ? _a : null) : null);\n                }\n            };\n            input.click();\n        });\n    }\n    else if (platform() === \"darwin\") {\n        if (folder) {\n            return await macChooseFolder(title);\n        }\n        else if (multiple) {\n            return await macChooseMultipleFiles(title, type);\n        }\n        else {\n            return await macChooseOneFile(title, type);\n        }\n    }\n    else if (platform() === \"linux\") {\n        if (folder) {\n            return await linuxChooseFolder(title);\n        }\n        else if (multiple) {\n            return await linuxChooseMultipleFiles(title, type);\n        }\n        else {\n            return await linuxChooseOneFile(title, type);\n        }\n    }\n    throw new Error(\"Unsupported platform or runtime\");\n}\n//# sourceMappingURL=pickFile.js.map"],"names":[],"mappings":";;;;AAGe,eAAe,QAAQ,CAAC,OAAO,GAAG,EAAE,EAAE;AACrD,IAAI,MAAM,EAAE,KAAK,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,QAAQ,GAAG,KAAK,EAAE,MAAM,GAAG,KAAK,EAAE,GAAG,OAAO,CAAC;AAChF,IAAI,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;AACtC,QAAQ,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AACtD,QAAQ,KAAK,CAAC,IAAI,GAAG,MAAM,CAAC;AAC5B,QAAQ,KAAK,CAAC,MAAM,GAAG,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;AACpE,QAAQ,KAAK,CAAC,QAAQ,GAAG,QAAQ,KAAK,IAAI,IAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,QAAQ,GAAG,KAAK,CAAC;AACrF,QAAQ,KAAK,CAAC,eAAe,GAAG,MAAM,KAAK,IAAI,IAAI,MAAM,KAAK,KAAK,CAAC,GAAG,MAAM,GAAG,KAAK,CAAC;AACtF,QAAQ,OAAO,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI;AAC5C,YAAY,KAAK,CAAC,QAAQ,GAAG,MAAM;AACnC,gBAAgB,IAAI,EAAE,CAAC;AACvB,gBAAgB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;AAC1C,gBAAgB,IAAI,MAAM,IAAI,QAAQ,EAAE;AACxC,oBAAoB,OAAO,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;AACrD,iBAAiB;AACjB,qBAAqB;AACrB,oBAAoB,OAAO,CAAC,KAAK,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,EAAE,GAAG,IAAI,IAAI,IAAI,CAAC,CAAC;AACpG,iBAAiB;AACjB,aAAa,CAAC;AACd,YAAY,KAAK,CAAC,KAAK,EAAE,CAAC;AAC1B,SAAS,CAAC,CAAC;AACX,KAAK;AACL,SAAS,IAAI,QAAQ,EAAE,KAAK,QAAQ,EAAE;AACtC,QAAQ,IAAI,MAAM,EAAE;AACpB,YAAY,OAAO,MAAM,eAAe,CAAC,KAAK,CAAC,CAAC;AAChD,SAAS;AACT,aAAa,IAAI,QAAQ,EAAE;AAC3B,YAAY,OAAO,MAAM,sBAAsB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC7D,SAAS;AACT,aAAa;AACb,YAAY,OAAO,MAAM,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvD,SAAS;AACT,KAAK;AACL,SAAS,IAAI,QAAQ,EAAE,KAAK,OAAO,EAAE;AACrC,QAAQ,IAAI,MAAM,EAAE;AACpB,YAAY,OAAO,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC;AAClD,SAAS;AACT,aAAa,IAAI,QAAQ,EAAE;AAC3B,YAAY,OAAO,MAAM,wBAAwB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC/D,SAAS;AACT,aAAa;AACb,YAAY,OAAO,MAAM,kBAAkB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACzD,SAAS;AACT,KAAK;AACL,IAAI,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;AACvD;;;;"}